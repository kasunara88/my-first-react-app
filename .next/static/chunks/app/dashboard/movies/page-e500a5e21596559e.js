(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[727],{3481:(e,a,s)=>{Promise.resolve().then(s.bind(s,4744)),Promise.resolve().then(s.t.bind(s,8173,23))},4744:(e,a,s)=>{"use strict";s.d(a,{default:()=>H});var l=s(5155),t=s(6046),r=s(9871),n=s(2115),d=s(8368);let i=n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:a,className:(0,d.cn)("w-full caption-bottom text-sm",s),...t})})});i.displayName="Table";let c=n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("thead",{ref:a,className:(0,d.cn)("[&_tr]:border-b",s),...t})});c.displayName="TableHeader";let o=n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("tbody",{ref:a,className:(0,d.cn)("[&_tr:last-child]:border-0",s),...t})});o.displayName="TableBody",n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("tfoot",{ref:a,className:(0,d.cn)("border-t bg-neutral-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-neutral-800/50",s),...t})}).displayName="TableFooter";let m=n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("tr",{ref:a,className:(0,d.cn)("border-b transition-colors hover:bg-neutral-100/50 data-[state=selected]:bg-neutral-100 dark:hover:bg-neutral-800/50 dark:data-[state=selected]:bg-neutral-800",s),...t})});m.displayName="TableRow";let x=n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("th",{ref:a,className:(0,d.cn)("h-10 px-2 text-left align-middle font-medium text-neutral-500 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] dark:text-neutral-400",s),...t})});x.displayName="TableHead";let u=n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("td",{ref:a,className:(0,d.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})});u.displayName="TableCell",n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("caption",{ref:a,className:(0,d.cn)("mt-4 text-sm text-neutral-500 dark:text-neutral-400",s),...t})}).displayName="TableCaption";var p=s(2584),h=s(7325),f=s(2897),j=s(1680),N=s(6039),v=s(5600),g=s(2783),b=s(6217),y=s(689);let w=b.bL;b.l9;let C=b.ZL;b.bm;let k=n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(b.hJ,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t})});k.displayName=b.hJ.displayName;let R=n.forwardRef((e,a)=>{let{className:s,children:t,...r}=e;return(0,l.jsxs)(C,{children:[(0,l.jsx)(k,{}),(0,l.jsxs)(b.UC,{ref:a,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-neutral-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-neutral-800 dark:bg-neutral-950",s),...r,children:[t,(0,l.jsxs)(b.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-neutral-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-neutral-100 data-[state=open]:text-neutral-500 dark:ring-offset-neutral-950 dark:focus:ring-neutral-300 dark:data-[state=open]:bg-neutral-800 dark:data-[state=open]:text-neutral-400",children:[(0,l.jsx)(y.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});R.displayName=b.UC.displayName;let S=e=>{let{className:a,...s}=e;return(0,l.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};S.displayName="DialogHeader";let A=e=>{let{className:a,...s}=e;return(0,l.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};A.displayName="DialogFooter";let T=n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(b.hE,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",s),...t})});T.displayName=b.hE.displayName;let M=n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(b.VY,{ref:a,className:(0,d.cn)("text-sm text-neutral-500 dark:text-neutral-400",s),...t})});M.displayName=b.VY.displayName;var D=s(6283),E=s(9921),J=s(9896),_=s(6689),z=s(8077),U=s(6236);function $(e){var a,s;let{movie:t,open:d,onSubmit:i,onCancel:c,loading:o}=e,[m,x]=(0,n.useState)(null==t?void 0:t.title),[u,b]=(0,n.useState)(null==t?void 0:t.year),[y,C]=(0,n.useState)(null==t?void 0:t.plot),[k,A]=(0,n.useState)(null==t?void 0:t.poster),[M,$]=(0,n.useState)(null==t?void 0:t.rated),[L,P]=(0,n.useState)(null!==(s=null===(a=t.imdb)||void 0===a?void 0:a.rating)&&void 0!==s?s:0),[F,I]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(t){var e;I((null===(e=t.genres)||void 0===e?void 0:e.map(e=>"object"==typeof e?e.value:e))||[])}},[t]);let O=U.D.map(e=>({label:e,value:e}));return(0,l.jsx)(w,{open:d,onOpenChange:c,children:(0,l.jsxs)(R,{className:"max-w-2xl rounded-xl shadow-xl",children:[(0,l.jsx)(S,{className:"border-b pb-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(p.A,{className:"h-6 w-6 text-primary"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(T,{className:"text-2xl font-bold",children:"Edit Movie"}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Update details for ",null==t?void 0:t.title]})]})]})}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({...t,title:m,year:u,plot:y,genres:F,poster:k,rated:M,imdb:{rating:L}})},className:"space-y-6 px-1",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(J.J,{className:"flex items-center gap-2",children:[(0,l.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"}),"Movie Title"]}),(0,l.jsx)(E.p,{value:m,onChange:e=>x(e.target.value),className:"pl-10 focus:ring-primary",placeholder:"The Dark Knight"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(J.J,{className:"flex items-center gap-2",children:[(0,l.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"}),"Release Year"]}),(0,l.jsx)(E.p,{type:"number",value:u,onChange:e=>b(Number(e.target.value)),className:"pl-10 [appearance:textfield]",placeholder:"2024"})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(J.J,{className:"flex items-center gap-2",children:[(0,l.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"}),"Plot Summary"]}),(0,l.jsx)(_.T,{value:y,onChange:e=>C(e.target.value),className:"min-h-[120px] focus:ring-primary",placeholder:"A compelling summary of the movie's storyline..."}),(0,l.jsxs)("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[(0,l.jsxs)("span",{children:[(null==y?void 0:y.length)||0,"/500 characters"]}),(0,l.jsx)("span",{children:"Minimum 50 characters"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(J.J,{children:"Genres"}),(0,l.jsx)(z.K,{list:O,selectedItems:F,onValueChange:I,placeholder:"Select genres...",className:"border-2 border-muted focus:border-primary"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(J.J,{children:"Content Rating"}),(0,l.jsxs)(D.l6,{value:M,onValueChange:$,children:[(0,l.jsx)(D.bq,{className:"h-12 px-4 text-md focus:ring-primary",children:(0,l.jsx)(D.yv,{placeholder:"Select Rating"})}),(0,l.jsx)(D.gC,{className:"max-h-60",children:U.l.map(e=>(0,l.jsx)(D.eb,{value:e,className:"text-md py-3",children:e},e))})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(J.J,{className:"flex items-center gap-2",children:[(0,l.jsx)(N.A,{className:"h-4 w-4 text-muted-foreground"}),"IMDb Rating"]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(E.p,{value:L,onChange:e=>P(Number(e.target.value)),type:"number",step:"0.1",className:"pl-10 focus:ring-primary",placeholder:"8.5"}),(0,l.jsx)(N.A,{className:"absolute left-3 top-3 h-4 w-4 text-yellow-500"})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(J.J,{className:"flex items-center gap-2",children:[(0,l.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground"}),"Poster URL"]}),(0,l.jsx)(E.p,{value:k,onChange:e=>A(e.target.value),type:"url",className:"focus:ring-primary",placeholder:"https://example.com/poster.jpg"})]}),k&&(0,l.jsx)("div",{className:"border rounded-lg p-2 bg-muted/10",children:(0,l.jsx)("img",{src:k,alt:"Poster preview",className:"h-40 w-28 object-cover rounded-md mx-auto",onError:e=>{e.target.src="/placeholder-poster.svg"}})})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t",children:[(0,l.jsx)(r.$,{type:"button",variant:"outline",onClick:c,className:"px-6 py-3 text-md",disabled:o,children:"Cancel"}),(0,l.jsx)(r.$,{type:"submit",className:"px-6 py-3 text-md bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary",disabled:o,children:o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.A,{className:"mr-2 h-5 w-5 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})}var L=s(5828);let P=(0,L.createServerReference)("7f62f94429305fe54bc285d34935238558cee0dc37",L.callServer,void 0,L.findSourceMapURL,"updateMovie"),F=(0,L.createServerReference)("7fe90c954cd02f1140a12f88d51319613c76af01bb",L.callServer,void 0,L.findSourceMapURL,"deleteMovie");var I=s(1068);function O(e){let{open:a,movie:s,onConfirm:t,onCancel:n,loading:d}=e;return(0,l.jsx)(w,{open:a,onOpenChange:n,children:(0,l.jsxs)(R,{className:"max-w-sm sm:max-w-md",children:[(0,l.jsxs)(S,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(I.A,{className:"h-5 w-5 text-red-500"}),(0,l.jsx)(T,{className:"whitespace-nowrap",children:"Delete Movie"})]}),(0,l.jsxs)(M,{className:"mt-2",children:["Are you sure you want to delete the movie"," ",(0,l.jsx)("strong",{children:null==s?void 0:s.title}),"? This action cannot be undone."]})]}),(0,l.jsxs)(A,{className:"mt-4",children:[(0,l.jsx)(r.$,{variant:"outline",onClick:n,disabled:d,children:"Cancel"}),(0,l.jsxs)(r.$,{variant:"destructive",onClick:t,disabled:d,className:"flex items-center gap-2",children:[d&&(0,l.jsx)(g.A,{className:"h-4 w-4 animate-spin"}),"Delete"]})]})]})})}var V=s(8070),Y=s(5524);function H(e){let{movies:a}=e,[s,d]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),[f,j]=(0,n.useState)(null),[v,g]=(0,n.useState)(null),b=(0,t.useRouter)(),y=e=>{console.log("Edit",e),j(e)},w=async e=>{let{id:a,title:s,year:l,plot:t,rated:r,genres:n,poster:i,imdb:c}=e;d(!0);let o=await P(a,{title:s,year:l,plot:t,rated:r,genres:n,poster:i,imdb:c});d(!1),(null==o?void 0:o.success)&&(j(null),b.refresh())},C=e=>{g(e)},k=async e=>{h(!0);let a=await F(e);h(!1),(null==a?void 0:a.success)&&(g(null),b.refresh())};return(0,l.jsxs)("div",{className:"w-full overflow-x-auto",children:[(0,l.jsxs)(i,{className:"min-w-full table-auto border border-gray-200",children:[(0,l.jsx)(c,{className:"bg-gray-100",children:(0,l.jsxs)(m,{children:[(0,l.jsx)(x,{className:"  px-4 py-2 font-semibold text-left",children:"Cover"}),(0,l.jsx)(x,{className:"px-4 py-2 font-semibold text-left",children:"Movie Title"}),(0,l.jsx)(x,{className:"px-4 py-2 font-semibold text-left",children:"Year"}),(0,l.jsx)(x,{className:"px-4 py-2 font-semibold text-left",children:"Rating"}),(0,l.jsx)(x,{className:"px-4 py-2 font-semibold text-left",children:"IMDb"}),(0,l.jsx)(x,{className:"px-4 py-2 font-semibold text-left",children:"Genres"}),(0,l.jsx)(x,{className:"px-4 py-2 font-semibold text-center",children:"Actions"})]})}),(0,l.jsx)(o,{children:a.map(e=>{var a,s,t,n,d,i,c;return(0,l.jsxs)(m,{className:"odd:bg-white even:bg-gray-50 hover:bg-gray-100",children:[(0,l.jsx)(u,{className:"px-4 py-2",children:(0,l.jsx)("div",{className:"h-[70px] w-[50px] overflow-hidden bg-gray-200 rounded-md flex items-center justify-center",children:e.poster?(0,l.jsx)("img",{src:e.poster,alt:"".concat(e.title," poster"),className:"h-full w-auto object-cover"}):(0,l.jsx)("span",{className:"text-xs text-gray-500",children:"No Image"})})}),(0,l.jsx)(u,{className:"px-4 py-2",children:null!==(t=null==e?void 0:e.title)&&void 0!==t?t:"N/A"}),(0,l.jsx)(u,{className:"px-4 py-2",children:null!==(n=null==e?void 0:e.year)&&void 0!==n?n:"N/A"}),(0,l.jsx)(u,{className:"px-4 py-2",children:null!==(d=null==e?void 0:e.rate)&&void 0!==d?d:"N/A"}),(0,l.jsx)(u,{className:"px-4 py-2",children:(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(N.A,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),(0,l.jsx)("span",{children:null!==(i=null==e?void 0:null===(s=e.imdb)||void 0===s?void 0:null===(a=s.rating)||void 0===a?void 0:a.toFixed(1))&&void 0!==i?i:"N/A"})]})}),(0,l.jsx)(u,{className:"px-4 py-2",children:null!==(c=null==e?void 0:e.genres.join(", "))&&void 0!==c?c:"N/A"}),(0,l.jsx)(u,{className:"px-4 py-2 text-center",children:(0,l.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,l.jsxs)(r.$,{variant:"outline",size:"sm",className:"h-8 gap-1",onClick:()=>y(e),children:[(0,l.jsx)(V.A,{className:"h-3.5 w-3.5"}),(0,l.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,l.jsxs)(r.$,{variant:"destructive",size:"sm",className:"h-8 gap-1",onClick:()=>C(e),children:[(0,l.jsx)(Y.A,{className:"h-3.5 w-3.5"}),(0,l.jsx)("span",{className:"sr-only",children:"Delete"})]})]})})]},e.id)})})]}),f&&(0,l.jsx)($,{movie:f,open:!0,onSubmit:w,onCancel:()=>j(null),loading:s}),v&&(0,l.jsx)(O,{movie:v,open:!0,onCancel:()=>g(null),onConfirm:()=>k(null==v?void 0:v.id),loading:p})]})}s(5565)}},e=>{var a=a=>e(e.s=a);e.O(0,[545,915,350,173,89,440,970,925,972,46,441,517,358],()=>a(3481)),_N_E=e.O()}]);