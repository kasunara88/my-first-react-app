(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[727],{3481:(e,a,l)=>{Promise.resolve().then(l.bind(l,4744)),Promise.resolve().then(l.t.bind(l,8173,23))},4744:(e,a,l)=>{"use strict";l.d(a,{default:()=>L});var t=l(5155),s=l(6046),r=l(9871),n=l(2115),i=l(8368);let d=n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,i.cn)("w-full caption-bottom text-sm",l),...s})})});d.displayName="Table";let o=n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("thead",{ref:a,className:(0,i.cn)("[&_tr]:border-b",l),...s})});o.displayName="TableHeader";let c=n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("tbody",{ref:a,className:(0,i.cn)("[&_tr:last-child]:border-0",l),...s})});c.displayName="TableBody",n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("tfoot",{ref:a,className:(0,i.cn)("border-t bg-neutral-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-neutral-800/50",l),...s})}).displayName="TableFooter";let m=n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("tr",{ref:a,className:(0,i.cn)("border-b transition-colors hover:bg-neutral-100/50 data-[state=selected]:bg-neutral-100 dark:hover:bg-neutral-800/50 dark:data-[state=selected]:bg-neutral-800",l),...s})});m.displayName="TableRow";let u=n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("th",{ref:a,className:(0,i.cn)("h-10 px-2 text-left align-middle font-medium text-neutral-500 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] dark:text-neutral-400",l),...s})});u.displayName="TableHead";let x=n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("td",{ref:a,className:(0,i.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),...s})});x.displayName="TableCell",n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)("caption",{ref:a,className:(0,i.cn)("mt-4 text-sm text-neutral-500 dark:text-neutral-400",l),...s})}).displayName="TableCaption";var h=l(6283),p=l(6217),f=l(689);let v=p.bL;p.l9;let j=p.ZL;p.bm;let b=n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)(p.hJ,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",l),...s})});b.displayName=p.hJ.displayName;let N=n.forwardRef((e,a)=>{let{className:l,children:s,...r}=e;return(0,t.jsxs)(j,{children:[(0,t.jsx)(b,{}),(0,t.jsxs)(p.UC,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-neutral-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-neutral-800 dark:bg-neutral-950",l),...r,children:[s,(0,t.jsxs)(p.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-neutral-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-neutral-100 data-[state=open]:text-neutral-500 dark:ring-offset-neutral-950 dark:focus:ring-neutral-300 dark:data-[state=open]:bg-neutral-800 dark:data-[state=open]:text-neutral-400",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});N.displayName=p.UC.displayName;let g=e=>{let{className:a,...l}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...l})};g.displayName="DialogHeader";let y=e=>{let{className:a,...l}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...l})};y.displayName="DialogFooter";let w=n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)(p.hE,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",l),...s})});w.displayName=p.hE.displayName;let k=n.forwardRef((e,a)=>{let{className:l,...s}=e;return(0,t.jsx)(p.VY,{ref:a,className:(0,i.cn)("text-sm text-neutral-500 dark:text-neutral-400",l),...s})});k.displayName=p.VY.displayName;var R=l(2783),C=l(9921),S=l(9896),M=l(6689),T=l(8077),A=l(6236);function E(e){var a,l;let{movie:s,open:i,onSubmit:d,onCancel:o,loading:c}=e,[m,u]=(0,n.useState)(null==s?void 0:s.title),[x,p]=(0,n.useState)(null==s?void 0:s.year),[f,j]=(0,n.useState)(null==s?void 0:s.plot),[b,y]=(0,n.useState)(null==s?void 0:s.poster),[E,F]=(0,n.useState)(null==s?void 0:s.genres),[D,J]=(0,n.useState)(null==s?void 0:s.rated),[U,L]=(0,n.useState)(null!==(l=null===(a=s.imdb)||void 0===a?void 0:a.rating)&&void 0!==l?l:0),_=A.D.map(e=>({label:e,value:e}));return(0,t.jsx)(v,{open:i,onOpenChange:o,children:(0,t.jsxs)(N,{children:[(0,t.jsxs)(g,{children:[(0,t.jsx)(w,{children:"Edit Movie"}),(0,t.jsx)(k,{children:"Update the Selected Movie"})]}),(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),d({...s,title:m,year:x,plot:f,genres:E,poster:b,rated:D,imdb:{rating:U}})},children:(0,t.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S.J,{htmlFor:"title",className:"font-medium",children:"Movie Title"}),(0,t.jsx)(C.p,{id:"title",name:"title",value:m,onChange:e=>u(e.target.value),placeholder:"Enter the movie title",className:"focus-visible:ring-primary"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S.J,{htmlFor:"year",className:"font-medium",children:"Movie Year"}),(0,t.jsx)(C.p,{id:"year",name:"year",value:x,onChange:e=>p(Number(e.target.value)),type:"number",placeholder:"Enter the year",className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none]"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S.J,{htmlFor:"plot",className:"font-medium",children:"Plot Summary"}),(0,t.jsx)(M.T,{id:"plot",name:"plot",value:f,onChange:e=>j(e.target.value),placeholder:"A compelling summary of the movie's storyline...",className:"min-h-[100px] focus-visible:ring-primary"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S.J,{htmlFor:"genres",className:"font-medium",children:"Genres"}),(0,t.jsx)(T.K,{list:_,placeholder:"Select Movie Genres",selectedItems:E,onValueChange:F,className:"focus-visible:ring-primary"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Select up to 5 genres"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S.J,{htmlFor:"rated",className:"font-medium",children:"Rating"}),(0,t.jsxs)(h.l6,{value:D,onValueChange:e=>J(e),children:[(0,t.jsx)(h.bq,{className:"focus-visible:ring-primary",children:(0,t.jsx)(h.yv,{placeholder:"Select Rating"})}),(0,t.jsx)(h.gC,{children:A.l.map(e=>(0,t.jsx)(h.eb,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S.J,{htmlFor:"imdb",children:"IMDb Rating"}),(0,t.jsx)(C.p,{id:"imdb",name:"imdb",max:"10.0",step:"0.1",type:"number",placeholder:"Enter imdb rating",value:U,onChange:e=>L(Number(e.target.value))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S.J,{htmlFor:"poster",className:"font-medium",children:"Poster URL"}),(0,t.jsx)(C.p,{id:"poster",name:"poster",type:"name",value:b,onChange:e=>y(e.target.value),placeholder:"Enter the poster URL",className:"focus-visible:ring-primary"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be a valid HTTPS URL"})]}),(0,t.jsx)("div",{className:"border-t py-6",children:(0,t.jsxs)("div",{className:"w-full flex justify-end gap-4",children:[(0,t.jsx)(r.$,{type:"reset",variant:"outline",className:"min-w-[120px]",disabled:c,children:"Reset"}),(0,t.jsx)(r.$,{type:"submit",className:"min-w-[120px] bg-slate-600 hover:bg-primary/90",disabled:c,children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding..."]}):"Add Movie"})]})})]})})]})})}var F=l(5828);let D=(0,F.createServerReference)("7f62f94429305fe54bc285d34935238558cee0dc37",F.callServer,void 0,F.findSourceMapURL,"updateMovie"),J=(0,F.createServerReference)("7fe90c954cd02f1140a12f88d51319613c76af01bb",F.callServer,void 0,F.findSourceMapURL,"deleteMovie");function U(e){let{open:a,movie:l,onConfirm:s,onCancel:n,loading:i}=e;return(0,t.jsx)(v,{open:a,onOpenChange:n,children:(0,t.jsxs)(N,{children:[(0,t.jsxs)(g,{children:[(0,t.jsx)(w,{children:"Delete Movie"}),(0,t.jsxs)(k,{children:["Are you sure you want to delete this movie ","",(0,t.jsx)("b",{children:null==l?void 0:l.title}),"? This action cannot be undone."]})]}),(0,t.jsxs)(y,{children:[(0,t.jsx)(r.$,{variant:"outline",onClick:n,disabled:i,children:"Cancel"}),(0,t.jsx)(r.$,{variant:"destructive",onClick:s,disabled:i,children:"Delete"})]})]})})}function L(e){let{movies:a}=e,[l,i]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[f,v]=(0,n.useState)(null),[j,b]=(0,n.useState)(null),N=(0,s.useRouter)(),g=e=>{console.log("Edit",e),v(e)},y=async e=>{let{id:a,title:l,year:t,plot:s,rated:r,genres:n,poster:d,imdb:o}=e;i(!0);let c=await D(a,{title:l,year:t,plot:s,rated:r,genres:n,poster:d,imdb:o});i(!1),(null==c?void 0:c.success)&&(v(null),N.refresh())},w=e=>{b(e)},k=async e=>{p(!0);let a=await J(e);p(!1),(null==a?void 0:a.success)&&(b(null),N.refresh())};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(d,{children:[(0,t.jsx)(o,{children:(0,t.jsxs)(m,{children:[(0,t.jsx)(u,{className:"font-bold",children:"#Cover"}),(0,t.jsx)(u,{className:"font-bold",children:" Movie Title"}),(0,t.jsx)(u,{className:"font-bold",children:"Year"}),(0,t.jsx)(u,{className:"font-bold",children:"Rating"}),(0,t.jsx)(u,{className:"font-bold",children:"IMDB"}),(0,t.jsx)(u,{className:"font-bold",children:"Genres"}),(0,t.jsx)(u,{className:"font-bold text-center",children:"Actions"})]})}),(0,t.jsx)(c,{children:a.map(e=>{var a,l,s,n,i,d;return(0,t.jsxs)(m,{children:[(0,t.jsx)(x,{children:"Poster URL"}),(0,t.jsx)(x,{children:null!==(l=null==e?void 0:e.title)&&void 0!==l?l:"N/A"}),(0,t.jsx)(x,{children:null!==(s=null==e?void 0:e.year)&&void 0!==s?s:"N/A"}),(0,t.jsx)(x,{children:null!==(n=null==e?void 0:e.rate)&&void 0!==n?n:"N/A"}),(0,t.jsx)(x,{children:null!==(i=null==e?void 0:null===(a=e.imdb)||void 0===a?void 0:a.rating)&&void 0!==i?i:"N/A"}),(0,t.jsx)(x,{children:null!==(d=null==e?void 0:e.genres.join(", "))&&void 0!==d?d:"N/A"}),(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(r.$,{variant:"outline",size:"sm",className:"min-w-[120px",onClick:()=>g(e),children:"Edit"}),(0,t.jsx)(r.$,{variant:"destructive",size:"sm",className:"min-w-[120px",onClick:()=>w(e),children:"Delete"})]})})]},e.id)})})]}),f&&(0,t.jsx)(E,{movie:f,open:!0,onSubmit:y,onCancel:()=>v(null),loading:l}),j&&(0,t.jsx)(U,{movie:j,open:!0,onCancel:()=>b(null),onConfirm:()=>k(null==j?void 0:j.id),loading:h})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[545,915,350,173,89,608,563,824,46,441,517,358],()=>a(3481)),_N_E=e.O()}]);