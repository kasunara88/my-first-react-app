"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[221],{9221:(t,e,n)=>{n.d(e,{MB:()=>z});var r,o={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},s=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,i={true:!0,false:!1,null:null,undefined:void 0,nan:Number.NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY},l=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/,a=n(2818),u=Object.create(null),c=t=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(t?u:globalThis),p=new Proxy(u,{get:(t,e)=>c()[e]??u[e],has:(t,e)=>e in c()||e in u,set:(t,e,n)=>(c(!0)[e]=n,!0),deleteProperty(t,e){if(!e)return!1;let n=c(!0);return delete n[e],!0},ownKeys:()=>Object.keys(c(!0))});"test"===(void 0!==a&&a.env&&"production"||"")||p.TEST;var f=class extends Error{constructor(t,e){super(t),this.name="BetterAuthError",this.message=t,this.cause=e,this.stack=""}};function d(t,e="/api/auth"){return!function(t){try{let e=new URL(t);return"/"!==e.pathname}catch(e){throw new f(`Invalid base URL: ${t}. Please provide a valid base URL.`)}}(t)?(e=e.startsWith("/")?e:`/${e}`,`${t.replace(/\/+$/,"")}${e}`):t}var h=Object.defineProperty,y=Object.defineProperties,v=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,w=(t,e,n)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R=(t,e)=>{for(var n in e||(e={}))m.call(e,n)&&w(t,n,e[n]);if(g)for(var n of g(e))b.call(e,n)&&w(t,n,e[n]);return t},T=(t,e)=>y(t,v(e)),E=class extends Error{constructor(t,e,n){super(e||t.toString(),{cause:n}),this.status=t,this.statusText=e,this.error=n}},O=async(t,e)=>{var n,r,o,s,i,l;let a=e||{},u={onRequest:[null==e?void 0:e.onRequest],onResponse:[null==e?void 0:e.onResponse],onSuccess:[null==e?void 0:e.onSuccess],onError:[null==e?void 0:e.onError],onRetry:[null==e?void 0:e.onRetry]};if(!e||!(null==e?void 0:e.plugins))return{url:t,options:a,hooks:u};for(let c of(null==e?void 0:e.plugins)||[]){if(c.init){let r=await (null==(n=c.init)?void 0:n.call(c,t.toString(),e));a=r.options||a,t=r.url}u.onRequest.push(null==(r=c.hooks)?void 0:r.onRequest),u.onResponse.push(null==(o=c.hooks)?void 0:o.onResponse),u.onSuccess.push(null==(s=c.hooks)?void 0:s.onSuccess),u.onError.push(null==(i=c.hooks)?void 0:i.onError),u.onRetry.push(null==(l=c.hooks)?void 0:l.onRetry)}return{url:t,options:a,hooks:u}},S=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(){return this.options.delay}},U=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(t){return Math.min(this.options.maxDelay,this.options.baseDelay*2**t)}},j=t=>{let e={},n=t=>"function"==typeof t?t():t;if(null==t?void 0:t.auth){if("Bearer"===t.auth.type){let r=n(t.auth.token);if(!r)return e;e.authorization=`Bearer ${r}`}else if("Basic"===t.auth.type){let r=n(t.auth.username),o=n(t.auth.password);if(!r||!o)return e;e.authorization=`Basic ${btoa(`${r}:${o}`)}`}else if("Custom"===t.auth.type){let r=n(t.auth.value);if(!r)return e;e.authorization=`${n(t.auth.prefix)} ${r}`}}return e},P=["get","post","put","patch","delete"],_=t=>({id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(e,n){var r,o,s,i;let l=(null==(o=null==(r=t.plugins)?void 0:r.find(t=>{var n;return null!=(n=t.schema)&&!!n.config&&(e.startsWith(t.schema.config.baseURL||"")||e.startsWith(t.schema.config.prefix||""))}))?void 0:o.schema)||t.schema;if(l){let t=e;(null==(s=l.config)?void 0:s.prefix)&&t.startsWith(l.config.prefix)&&(t=t.replace(l.config.prefix,""),l.config.baseURL&&(e=e.replace(l.config.prefix,l.config.baseURL))),(null==(i=l.config)?void 0:i.baseURL)&&t.startsWith(l.config.baseURL)&&(t=t.replace(l.config.baseURL,""));let r=l.schema[t];if(r){let t=T(R({},n),{method:r.method,output:r.output});return(null==n?void 0:n.disableValidation)||(t=T(R({},t),{body:r.input?r.input.parse(null==n?void 0:n.body):null==n?void 0:n.body,params:r.params?r.params.parse(null==n?void 0:n.params):null==n?void 0:n.params,query:r.query?r.query.parse(null==n?void 0:n.query):null==n?void 0:n.query})),{url:e,options:t}}}return{url:e,options:n}}}),x=t=>async function(e,n){let r=T(R(R({},t),n),{plugins:[...(null==t?void 0:t.plugins)||[],_(t||{})]});if(null==t?void 0:t.catchAllError)try{return await N(e,r)}catch(t){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:t}}}return await N(e,r)},A=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function I(t){if(void 0===t)return!1;let e=typeof t;return"string"===e||"number"===e||"boolean"===e||null===e||"object"===e&&(!!Array.isArray(t)||!t.buffer&&(t.constructor&&"Object"===t.constructor.name||"function"==typeof t.toJSON))}function L(t){try{return JSON.parse(t)}catch(e){return t}}function $(t){return"function"==typeof t}var N=async(t,e)=>{var n,r,o,s,i,l,a,u;let{hooks:c,url:p,options:f}=await O(t,e),d=function(t){if(null==t?void 0:t.customFetchImpl)return t.customFetchImpl;if("undefined"!=typeof globalThis&&$(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&$(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(f),h=new AbortController,y=null!=(n=f.signal)?n:h.signal,v=function(t,e){let{baseURL:n,params:r,query:o}=e||{query:{},params:{},baseURL:""},s=t.startsWith("http")?t.split("/").slice(0,3).join("/"):n;if(!s)throw TypeError(`Invalid URL ${t}. Are you passing in a relative URL but not setting the baseURL?`);if(t.startsWith("@")){let e=t.toString().split("@")[1].split("/")[0];P.includes(e)&&(t=t.replace(`@${e}/`,"/"))}s.endsWith("/")||(s+="/");let[i,l]=t.replace(s,"").split("?"),a=new URLSearchParams(l);for(let[t,e]of Object.entries(o||{}))a.set(t,String(e));if(r){if(Array.isArray(r))for(let[t,e]of i.split("/").filter(t=>t.startsWith(":")).entries()){let n=r[t];i=i.replace(e,n)}else for(let[t,e]of Object.entries(r))i=i.replace(`:${t}`,String(e))}(i=i.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(i=i.slice(1));let u=a.size>0?`?${a}`.replace(/\+/g,"%20"):"";return new URL(`${i}${u}`,s)}(p,f),g=function(t){if(!(null==t?void 0:t.body))return null;let e=new Headers(null==t?void 0:t.headers);return I(t.body)&&!e.has("content-type")?JSON.stringify(t.body):t.body}(f),m=function(t){let e=new Headers(null==t?void 0:t.headers);for(let[n,r]of Object.entries(j(t)||{}))e.set(n,r);if(!e.has("content-type")){let n=I(null==t?void 0:t.body)?"application/json":null;n&&e.set("content-type",n)}return e}(f),b=function(t,e){var n;if(null==e?void 0:e.method)return e.method.toUpperCase();if(t.startsWith("@")){let r=null==(n=t.split("@")[1])?void 0:n.split("/")[0];return P.includes(r)?r.toUpperCase():(null==e?void 0:e.body)?"POST":"GET"}return(null==e?void 0:e.body)?"POST":"GET"}(p,f),w=T(R({},f),{url:v,headers:m,body:g,method:b,signal:y});for(let t of c.onRequest)if(t){let e=await t(w);e instanceof Object&&(w=e)}("pipeTo"in w&&"function"==typeof w.pipeTo||"function"==typeof(null==(r=null==e?void 0:e.body)?void 0:r.pipe))&&!("duplex"in w)&&(w.duplex="half");let{clearTimeout:_}=function(t,e){let n;return!(null==t?void 0:t.signal)&&(null==t?void 0:t.timeout)&&(n=setTimeout(()=>null==e?void 0:e.abort(),null==t?void 0:t.timeout)),{abortTimeout:n,clearTimeout:()=>{n&&clearTimeout(n)}}}(f,h),x=await d(w.url,w);_();let k={response:x,request:w};for(let t of c.onResponse)if(t){let n=await t(T(R({},k),{response:(null==(o=null==e?void 0:e.hookOptions)?void 0:o.cloneResponse)?x.clone():x}));n instanceof Response?x=n:n instanceof Object&&(x=n.response)}if(x.ok){if(!("HEAD"!==w.method))return{data:"",error:null};let t=function(t){let e=t.headers.get("content-type"),n=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!e)return"json";let r=e.split(";").shift()||"";return A.test(r)?"json":n.has(r)||r.startsWith("text/")?"text":"blob"}(x),n={data:"",response:x,request:w};if("json"===t||"text"===t){let t=await x.text(),e=null!=(s=w.jsonParser)?s:L,r=await e(t);n.data=r}else n.data=await x[t]();for(let t of((null==w?void 0:w.output)&&w.output&&!w.disableValidation&&(n.data=w.output.parse(n.data)),c.onSuccess))t&&await t(T(R({},n),{response:(null==(i=null==e?void 0:e.hookOptions)?void 0:i.cloneResponse)?x.clone():x}));return(null==e?void 0:e.throw)?n.data:{data:n.data,error:null}}let q=null!=(l=null==e?void 0:e.jsonParser)?l:L,C=await x.text(),B=!function(t){try{return JSON.parse(t),!0}catch(t){return!1}}(C)?{}:await q(C),W={response:x,request:w,error:T(R({},B),{status:x.status,statusText:x.statusText})};for(let t of c.onError)t&&await t(T(R({},W),{response:(null==(a=null==e?void 0:e.hookOptions)?void 0:a.cloneResponse)?x.clone():x}));if(null==e?void 0:e.retry){let n=function(t){if("number"==typeof t)return new S({type:"linear",attempts:t,delay:1e3});switch(t.type){case"linear":return new S(t);case"exponential":return new U(t);default:throw Error("Invalid retry strategy")}}(e.retry),r=null!=(u=e.retryAttempt)?u:0;if(await n.shouldAttemptRetry(r,x)){for(let t of c.onRetry)t&&await t(k);let o=n.getDelay(r);return await new Promise(t=>setTimeout(t,o)),await N(t,T(R({},e),{retryAttempt:r+1}))}}if(null==e?void 0:e.throw)throw new E(x.status,x.statusText,B);return{data:null,error:T(R({},B),{status:x.status,statusText:x.statusText})}};let k=[],q=0,C=0,B=t=>{let e=[],n={get:()=>(n.lc||n.listen(()=>{})(),n.value),lc:0,listen:t=>(n.lc=e.push(t),()=>{for(let e=q+4;e<k.length;)k[e]===t?k.splice(e,4):e+=4;let r=e.indexOf(t);!~r||(e.splice(r,1),--n.lc||n.off())}),notify(t,r){C++;let o=!k.length;for(let o of e)k.push(o,n.value,t,r);if(o){for(q=0;q<k.length;q+=4)k[q](k[q+1],k[q+2],k[q+3]);k.length=0}},off(){},set(t){let e=n.value;e!==t&&(n.value=t,n.notify(e))},subscribe(t){let e=n.listen(t);return t(n.value),e},value:t};return n},W=(t,e,n,r)=>(t.events=t.events||{},t.events[n+10]||(t.events[n+10]=r(e=>{t.events[n].reduceRight((t,e)=>(e(t),t),{shared:{},...e})})),t.events[n]=t.events[n]||[],t.events[n].push(e),()=>{let r=t.events[n],o=r.indexOf(e);r.splice(o,1),r.length||(delete t.events[n],t.events[n+10](),delete t.events[n+10])}),D=(t,e)=>W(t,n=>{let r=e(n);r&&t.events[6].push(r)},5,e=>{let n=t.listen;t.listen=(...r)=>(t.lc||t.active||(t.active=!0,e()),n(...r));let r=t.off;return t.events[6]=[],t.off=()=>{r(),setTimeout(()=>{if(t.active&&!t.lc){for(let e of(t.active=!1,t.events[6]))e();t.events[6]=[]}},1e3)},()=>{t.listen=n,t.off=r}});var F=(t,e,n,r)=>{let o=B({data:null,error:null,isPending:!0,isRefetching:!1,refetch:()=>s()}),s=()=>{let t="function"==typeof r?r({data:o.get().data,error:o.get().error,isPending:o.get().isPending}):r;return n(e,{...t,async onSuccess(e){"undefined"!=typeof window&&o.set({data:e.data,error:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await t?.onSuccess?.(e)},async onError(e){let{request:n}=e,r="number"==typeof n.retry?n.retry:n.retry?.attempts,s=n.retryAttempt||0;r&&s<r||(o.set({error:e.error,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await t?.onError?.(e))},async onRequest(e){let n=o.get();o.set({isPending:null===n.data,data:n.data,error:null,isRefetching:!0,refetch:o.value.refetch}),await t?.onRequest?.(e)}})};t=Array.isArray(t)?t:[t];let i=!1;for(let e of t)e.subscribe(()=>{i?s():D(o,()=>(s(),i=!0,()=>{o.off(),e.off()}))});return o},H={id:"redirect",name:"Redirect",hooks:{onSuccess(t){if(t.data?.url&&t.data?.redirect&&"undefined"!=typeof window&&window.location&&window.location)try{window.location.href=t.data.url}catch{}}}},G=t=>{let e="credentials"in Request.prototype,n=function(t,e){if(t)return d(t,void 0);let n=p.BETTER_AUTH_URL||p.NEXT_PUBLIC_BETTER_AUTH_URL||p.PUBLIC_BETTER_AUTH_URL||p.NUXT_PUBLIC_BETTER_AUTH_URL||p.NUXT_PUBLIC_AUTH_URL||("/"!==p.BASE_URL?p.BASE_URL:void 0);return n?d(n,void 0):"undefined"!=typeof window&&window.location?d(window.location.origin,void 0):void 0}(t?.baseURL),r=t?.plugins?.flatMap(t=>t.fetchPlugins).filter(t=>void 0!==t)||[],a=x({baseURL:n,...e?{credentials:"include"}:{},method:"GET",jsonParser:t=>(function(t,e={strict:!0}){return function(t,e={}){let{strict:n=!1,warnings:r=!1,reviver:a,parseDates:u=!0}=e;if("string"!=typeof t)return t;let c=t.trim();if('"'===c[0]&&c.endsWith('"')&&!c.slice(1,-1).includes('"'))return c.slice(1,-1);let p=c.toLowerCase();if(p.length<=9&&p in i)return i[p];if(!s.test(c)){if(n)throw SyntaxError("[better-json] Invalid JSON");return t}if(Object.entries(o).some(([t,e])=>{let n=e.test(c);return n&&r&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${t} pattern`),n})&&n)throw Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(c,(t,e)=>{if("__proto__"===t||"constructor"===t&&e&&"object"==typeof e&&"prototype"in e){r&&console.warn(`[better-json] Dropping "${t}" key to prevent prototype pollution`);return}if(u&&"string"==typeof e){let t=function(t){let e=l.exec(t);if(!e)return null;let[,n,r,o,s,i,a,u,c,p,f]=e,d=new Date(Date.UTC(parseInt(n,10),parseInt(r,10)-1,parseInt(o,10),parseInt(s,10),parseInt(i,10),parseInt(a,10),u?parseInt(u.padEnd(3,"0"),10):0));if(c){let t=(60*parseInt(p,10)+parseInt(f,10))*("+"===c?-1:1);d.setUTCMinutes(d.getUTCMinutes()+t)}return d instanceof Date&&!isNaN(d.getTime())?d:null}(e);if(t)return t}return a?a(t,e):e})}catch(e){if(n)throw e;return t}}(t,e)})(t,{strict:!1}),customFetchImpl:async(t,e)=>{try{return await fetch(t,e)}catch(t){return Response.error()}},...t?.fetchOptions,plugins:t?.disableDefaultFetchPlugins?[...t?.fetchOptions?.plugins||[],...r]:[H,...t?.fetchOptions?.plugins||[],...r]}),{$sessionSignal:u,session:c}=function(t){let e=B(!1);return{session:F(e,"/get-session",t,{method:"GET"}),$sessionSignal:e}}(a),f=t?.plugins||[],h={},y={$sessionSignal:u,session:c},v={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"},g=[{signal:"$sessionSignal",matcher:t=>"/sign-out"===t||"/update-user"===t||t.startsWith("/sign-in")||t.startsWith("/sign-up")||"/delete-user"===t}];for(let t of f)t.getAtoms&&Object.assign(y,t.getAtoms?.(a)),t.pathMethods&&Object.assign(v,t.pathMethods),t.atomListeners&&g.push(...t.atomListeners);let m={notify:t=>{y[t].set(!y[t].get())},listen:(t,e)=>{y[t].subscribe(e)},atoms:y};for(let t of f)t.getActions&&Object.assign(h,t.getActions?.(a,m));return{pluginsActions:h,pluginsAtoms:y,pluginPathMethods:v,atomListeners:g,$fetch:a,$store:m}},M=n(2115),J=(t,e)=>n=>{t.current=n,e()};function z(t){var e;let{pluginPathMethods:n,pluginsActions:r,pluginsAtoms:o,$fetch:s,$store:i,atomListeners:l}=G(t),a={};for(let[t,e]of Object.entries(o))a[`use${t.charAt(0).toUpperCase()+t.slice(1)}`]=()=>(function(t,{keys:e,deps:n=[t,e]}={}){let r=(0,M.useRef)();r.current=t.get();let o=(0,M.useCallback)(n=>(e?.length||0)>0?function(t,e,n){let r=new Set(e).add(void 0);return t.listen((t,e,o)=>{r.has(o)&&n(t,e,o)})}(t,e,J(r,n)):t.listen(J(r,n)),n),s=()=>r.current;return(0,M.useSyncExternalStore)(o,s,s)})(e);return e={...r,...a,$fetch:s,$store:i},function t(r=[]){return new Proxy(function(){},{get(n,o){let s=[...r,o],i=e;for(let t of s)if(i&&"object"==typeof i&&t in i)i=i[t];else{i=void 0;break}return"function"==typeof i?i:t(s)},apply:async(t,e,i)=>{let a="/"+r.map(t=>t.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)).join("/"),u=i[0]||{},c=i[1]||{},{query:p,fetchOptions:f,...d}=u,h={...c,...f},y=function(t,e,n){let r=e[t],{fetchOptions:o,query:s,...i}=n||{};return r||(o?.method?o.method:i&&Object.keys(i).length>0?"POST":"GET")}(a,n,u);return await s(a,{...h,body:"GET"===y?void 0:{...d,...h?.body||{}},query:p||h?.query,method:y,async onSuccess(t){await h?.onSuccess?.(t);let e=l?.find(t=>t.matcher(a));if(!e)return;let n=o[e.signal];if(!n)return;let r=n.get();setTimeout(()=>{n.set(!r)},10)}})}})}()}}}]);